# ä¾èµ–åˆ†æžæŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: 2025-11-28  
**åˆ†æ”¯**: feature/extreme-optimization  
**ä»»åŠ¡**: 1.1 åˆ†æžrequirements.txtä¸­çš„ä¾èµ–ä½¿ç”¨æƒ…å†µ

## ðŸ“Š æ€»ä½“æ¦‚å†µ

- **Pythonæ–‡ä»¶æ•°é‡**: 14ä¸ª
- **ä¸åŒçš„import**: 41ä¸ª
- **requirements.txtä¸­çš„ä¾èµ–**: 8ä¸ª
- **å®žé™…ä½¿ç”¨çš„ä¾èµ–**: 8ä¸ªï¼ˆ100%ä½¿ç”¨çŽ‡ï¼‰
- **æœªä½¿ç”¨çš„ä¾èµ–**: 0ä¸ª

## âœ… ä½¿ç”¨çš„ä¾èµ–ï¼ˆ8ä¸ªï¼‰

| åŒ…å | ç‰ˆæœ¬è¦æ±‚ | Importåç§° | ä½¿ç”¨åœºæ™¯ | ç±»åž‹ |
|------|---------|-----------|---------|------|
| **PySide6** | >=6.6.0 | PySide6 | GUIæ¡†æž¶ | æ ¸å¿ƒ |
| **Pillow** | >=10.0.0 | PIL | å›¾åƒå¤„ç† | æ ¸å¿ƒ |
| **openpyxl** | >=3.1.0 | openpyxl | Excelå¯¼å‡º | å¯é€‰ |
| **PyMuPDF** | >=1.23.0 | fitz | PDFå¤„ç† | å¯é€‰ |
| **alibabacloud-ocr-api20210707** | >=3.1.2 | alibabacloud_ocr_api20210707 | é˜¿é‡Œäº‘OCR | å¯é€‰ |
| **alibabacloud-tea-openapi** | >=0.3.0 | alibabacloud_tea_openapi | é˜¿é‡Œäº‘SDK | å¯é€‰ |
| **alibabacloud-tea-util** | >=0.3.0 | alibabacloud_tea_util | é˜¿é‡Œäº‘SDK | å¯é€‰ |
| **openai** | >=1.0.0 | openai | DeepSeek OCR | å¯é€‰ |

## âŒ æœªä½¿ç”¨çš„ä¾èµ–

**æ— ** - æ‰€æœ‰ä¾èµ–éƒ½è¢«ä½¿ç”¨äº†ï¼è¿™è¯´æ˜Žä¹‹å‰çš„ä¼˜åŒ–å·¥ä½œå·²ç»åšå¾—å¾ˆå¥½ã€‚

## âš ï¸ ç‰¹æ®Šæƒ…å†µï¼šnumpy

**çŠ¶æ€**: å·²åœ¨requirements.txtä¸­æ³¨é‡ŠæŽ‰  
**åŽŸå› **: ä»…åœ¨åœ¨çº¿OCRå¼•æ“Žå¤„ç†numpyæ•°ç»„è¾“å…¥æ—¶éœ€è¦  
**å®žçŽ°**: å·²å®žçŽ°æŒ‰éœ€å¯¼å…¥ï¼ˆåœ¨`ocr_engine_aliyun_new.py`å’Œ`ocr_engine_deepseek.py`ä¸­ï¼‰

```python
# æŒ‰éœ€å¯¼å…¥ç¤ºä¾‹
try:
    import numpy as np
    if isinstance(image, np.ndarray):
        image = Image.fromarray(image)
except ImportError:
    pass  # numpyä¸æ˜¯å¿…éœ€çš„
```

**å»ºè®®**: ä¿æŒå½“å‰çŠ¶æ€ï¼Œä¸æ·»åŠ åˆ°requirements.txt

## ðŸ“ å„æ–‡ä»¶çš„ä¾èµ–ä½¿ç”¨æƒ…å†µ

### æ ¸å¿ƒæ–‡ä»¶

#### qt_main.pyï¼ˆä¸»ç¨‹åºï¼‰
- âœ… PySide6 - GUIæ¡†æž¶
- âœ… PIL - å›¾åƒæ˜¾ç¤º
- âœ… config - é…ç½®ç®¡ç†
- âœ… ocr_cache_manager - ç¼“å­˜ç®¡ç†
- âœ… ocr_engine_manager - OCRå¼•æ“Žç®¡ç†
- âœ… utils - å·¥å…·å‡½æ•°

#### config.pyï¼ˆé…ç½®ç®¡ç†ï¼‰
- æ ‡å‡†åº“ï¼šjson, os, pathlib, sys

#### utils.pyï¼ˆå·¥å…·å‡½æ•°ï¼‰
- âœ… PIL - å›¾åƒå¤„ç†
- âœ… fitz (PyMuPDF) - PDFå¤„ç†
- âœ… openpyxl - Excelå¯¼å‡º
- âœ… config - é…ç½®

### OCRå¼•æ“Žæ–‡ä»¶

#### ocr_engine_manager.pyï¼ˆå¼•æ“Žç®¡ç†å™¨ï¼‰
- âœ… PIL - å›¾åƒå¤„ç†
- âœ… alibabacloud_ocr_api20210707 - æ£€æŸ¥é˜¿é‡Œäº‘SDK
- âœ… openai - æ£€æŸ¥DeepSeek SDK
- âœ… config - é…ç½®
- å»¶è¿Ÿå¯¼å…¥å„å¼•æ“Žæ¨¡å—

#### ocr_engine_paddle.pyï¼ˆPaddleOCRå¼•æ“Žï¼‰
- âœ… PIL - å›¾åƒå¤„ç†
- âœ… PPOCR_api - C++å¼•æ“ŽæŽ¥å£
- âœ… config - é…ç½®

#### ocr_engine_rapid.pyï¼ˆRapidOCRå¼•æ“Žï¼‰
- âœ… PIL - å›¾åƒå¤„ç†
- âœ… PPOCR_api - C++å¼•æ“ŽæŽ¥å£
- âœ… config - é…ç½®

#### ocr_engine_aliyun_new.pyï¼ˆé˜¿é‡Œäº‘OCRï¼‰
- âœ… PIL - å›¾åƒå¤„ç†
- âœ… alibabacloud_ocr_api20210707 - é˜¿é‡Œäº‘OCR API
- âœ… alibabacloud_tea_openapi - é˜¿é‡Œäº‘SDK
- âœ… alibabacloud_tea_util - é˜¿é‡Œäº‘å·¥å…·
- âš ï¸ numpy - æŒ‰éœ€å¯¼å…¥ï¼ˆå¤„ç†numpyæ•°ç»„ï¼‰
- âœ… config - é…ç½®

#### ocr_engine_deepseek.pyï¼ˆDeepSeek OCRï¼‰
- âœ… PIL - å›¾åƒå¤„ç†
- âœ… openai - DeepSeek API
- âš ï¸ numpy - æŒ‰éœ€å¯¼å…¥ï¼ˆå¤„ç†numpyæ•°ç»„ï¼‰
- âœ… config - é…ç½®

### å…¶ä»–æ–‡ä»¶

#### ocr_cache_manager.pyï¼ˆç¼“å­˜ç®¡ç†ï¼‰
- âœ… config - é…ç½®
- æ ‡å‡†åº“ï¼šctypes, json, os, pathlib, platform, typing

#### qt_run.pyï¼ˆå¯åŠ¨è„šæœ¬ï¼‰
- âœ… qt_main - ä¸»ç¨‹åº
- æ ‡å‡†åº“ï¼šos, sys, shutil, traceback

#### PPOCR_api.pyï¼ˆC++å¼•æ“ŽæŽ¥å£ï¼‰
- æ ‡å‡†åº“ï¼šatexit, base64, json, os, re, socket, subprocess, sys

## ðŸ’¡ ä¼˜åŒ–å»ºè®®

### 1. ä¾èµ–ç²¾ç®€ âœ…

**å½“å‰çŠ¶æ€**: å·²ç»éžå¸¸ç²¾ç®€
- âœ… å·²ç§»é™¤PaddleOCR/RapidOCRçš„Pythonç‰ˆæœ¬ï¼ˆ~800MBï¼‰
- âœ… å·²ç§»é™¤opencv-pythonï¼ˆ~80MBï¼‰
- âœ… å·²æ³¨é‡Šnumpyï¼ˆ~20MBï¼ŒæŒ‰éœ€å¯¼å…¥ï¼‰
- âœ… æ‰€æœ‰ä¾èµ–éƒ½è¢«å®žé™…ä½¿ç”¨

**æ— éœ€è¿›ä¸€æ­¥ç§»é™¤ä¾èµ–**

### 2. æŒ‰éœ€åŠ è½½ä¼˜åŒ– ðŸŽ¯

ä»¥ä¸‹ä¾èµ–å»ºè®®å®žçŽ°å»¶è¿Ÿå¯¼å…¥ï¼š

#### é«˜ä¼˜å…ˆçº§ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰

1. **openpyxl** (Excelå¯¼å‡º)
   - å½“å‰ï¼šé¡¶å±‚å¯¼å…¥åœ¨`utils.py`
   - å»ºè®®ï¼šä»…åœ¨`export_excel()`æ—¶å¯¼å…¥
   - é¢„æœŸï¼šå‡å°‘å¯åŠ¨æ—¶é—´~0.2ç§’

2. **PyMuPDF** (PDFå¤„ç†)
   - å½“å‰ï¼šé¡¶å±‚å¯¼å…¥åœ¨`utils.py`
   - å»ºè®®ï¼šä»…åœ¨å¤„ç†PDFæ–‡ä»¶æ—¶å¯¼å…¥
   - é¢„æœŸï¼šå‡å°‘å¯åŠ¨æ—¶é—´~0.3ç§’

3. **é˜¿é‡Œäº‘OCR SDK** (åœ¨çº¿OCR)
   - å½“å‰ï¼šåœ¨`ocr_engine_manager.py`ä¸­æ£€æŸ¥å¯¼å…¥
   - å»ºè®®ï¼šä»…åœ¨é…ç½®äº†APIå¯†é’¥æ—¶å¯¼å…¥
   - é¢„æœŸï¼šå‡å°‘å¯åŠ¨æ—¶é—´~0.1ç§’

4. **openai** (DeepSeek OCR)
   - å½“å‰ï¼šåœ¨`ocr_engine_manager.py`ä¸­æ£€æŸ¥å¯¼å…¥
   - å»ºè®®ï¼šä»…åœ¨é…ç½®äº†APIå¯†é’¥æ—¶å¯¼å…¥
   - é¢„æœŸï¼šå‡å°‘å¯åŠ¨æ—¶é—´~0.1ç§’

#### ä¸­ä¼˜å…ˆçº§ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

5. **PIL/Pillow** (å›¾åƒå¤„ç†)
   - å½“å‰ï¼šå¤šå¤„é¡¶å±‚å¯¼å…¥
   - å»ºè®®ï¼šä¿æŒé¡¶å±‚å¯¼å…¥ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
   - åŽŸå› ï¼šå›¾åƒå¤„ç†æ˜¯æ ¸å¿ƒåŠŸèƒ½ï¼Œå»¶è¿Ÿå¯¼å…¥æ”¶ç›Šä¸å¤§

6. **PySide6** (GUIæ¡†æž¶)
   - å½“å‰ï¼šé¡¶å±‚å¯¼å…¥
   - å»ºè®®ï¼šä¿æŒé¡¶å±‚å¯¼å…¥ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
   - åŽŸå› ï¼šGUIæ˜¯æ ¸å¿ƒåŠŸèƒ½ï¼Œå¿…é¡»åœ¨å¯åŠ¨æ—¶åŠ è½½

### 3. æ‰“åŒ…ä¼˜åŒ–å»ºè®® ðŸ“¦

#### PySide6ä¼˜åŒ–
- å½“å‰ä½¿ç”¨çš„Qtæ¨¡å—ï¼šQtCore, QtGui, QtWidgets
- å»ºè®®ï¼šåœ¨specæ–‡ä»¶ä¸­æ˜Žç¡®æŽ’é™¤æœªä½¿ç”¨çš„Qtæ¨¡å—
- é¢„æœŸï¼šå‡å°‘æ‰“åŒ…ä½“ç§¯~50-100MB

#### Pillowä¼˜åŒ–
- è€ƒè™‘ä½¿ç”¨Pillow-SIMDï¼ˆæ€§èƒ½æå‡15-30%ï¼‰
- æˆ–è€…åœ¨æ‰“åŒ…æ—¶æŽ’é™¤æœªä½¿ç”¨çš„å›¾åƒæ ¼å¼æ”¯æŒ
- é¢„æœŸï¼šå‡å°‘æ‰“åŒ…ä½“ç§¯~5-10MB

### 4. ä¾èµ–ç‰ˆæœ¬ä¼˜åŒ– ðŸ”„

å½“å‰ç‰ˆæœ¬è¦æ±‚éƒ½å¾ˆåˆç†ï¼š

```python
PySide6>=6.6.0          # æœ€æ–°ç¨³å®šç‰ˆ
Pillow>=10.0.0          # æœ€æ–°ç¨³å®šç‰ˆ
openpyxl>=3.1.0         # æœ€æ–°ç¨³å®šç‰ˆ
PyMuPDF>=1.23.0         # æœ€æ–°ç¨³å®šç‰ˆ
```

**å»ºè®®**: ä¿æŒå½“å‰ç‰ˆæœ¬è¦æ±‚

## ðŸ“ˆ ä¼˜åŒ–æ½œåŠ›è¯„ä¼°

| ä¼˜åŒ–é¡¹ | å½“å‰çŠ¶æ€ | ä¼˜åŒ–åŽ | æ”¶ç›Š |
|--------|---------|--------|------|
| ä¾èµ–æ•°é‡ | 8ä¸ª | 8ä¸ª | æ— éœ€ä¼˜åŒ– âœ… |
| æœªä½¿ç”¨ä¾èµ– | 0ä¸ª | 0ä¸ª | å·²ä¼˜åŒ– âœ… |
| æŒ‰éœ€åŠ è½½ | éƒ¨åˆ† | å…¨éƒ¨ | å¯åŠ¨æ—¶é—´â†“0.7ç§’ ðŸŽ¯ |
| æ‰“åŒ…ä½“ç§¯ | åŸºå‡† | -50-100MB | PySide6ä¼˜åŒ– ðŸŽ¯ |

## âœ… ç»“è®º

1. **ä¾èµ–ç®¡ç†å·²ç»å¾ˆå¥½** - æ‰€æœ‰ä¾èµ–éƒ½è¢«ä½¿ç”¨ï¼Œæ— å†—ä½™
2. **ä¸»è¦ä¼˜åŒ–æ–¹å‘** - å®žçŽ°æ›´å½»åº•çš„æŒ‰éœ€åŠ è½½
3. **æ¬¡è¦ä¼˜åŒ–æ–¹å‘** - ä¼˜åŒ–PySide6æ‰“åŒ…é…ç½®

## ðŸŽ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

æ ¹æ®åˆ†æžç»“æžœï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºæ‰§è¡Œä»»åŠ¡ï¼š

1. âœ… **ä»»åŠ¡1.1å®Œæˆ** - ä¾èµ–åˆ†æž
2. â­ï¸ **è·³è¿‡ä»»åŠ¡1.2** - æ— éœ€ç§»é™¤ä¾èµ–ï¼ˆå·²ä¼˜åŒ–ï¼‰
3. â­ï¸ **è·³è¿‡ä»»åŠ¡1.3** - numpyå·²æŒ‰éœ€å¯¼å…¥
4. ðŸŽ¯ **æ‰§è¡Œä»»åŠ¡3.x** - å®žçŽ°å½»åº•çš„æŒ‰éœ€åŠ è½½ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰
5. ðŸŽ¯ **æ‰§è¡Œä»»åŠ¡6.2** - ä¼˜åŒ–PySide6æ‰“åŒ…é…ç½®

## ðŸ“ é™„å½•ï¼šå®Œæ•´çš„importæ˜ å°„è¡¨

```python
# æ ‡å‡†åº“ï¼ˆæ— éœ€åœ¨requirements.txtä¸­ï¼‰
'os', 'sys', 'json', 'pathlib', 'typing', 'enum', 'dataclasses',
'collections', 'time', 'datetime', 're', 'subprocess', 'ctypes',
'base64', 'socket', 'threading', 'gc', 'ast', 'io', 'atexit',
'importlib', 'platform', 'shutil', 'tempfile', 'traceback', 'unittest'

# é¡¹ç›®å†…éƒ¨æ¨¡å—
'config', 'utils', 'qt_main', 'PPOCR_api',
'ocr_cache_manager', 'ocr_engine_manager',
'ocr_engine_paddle', 'ocr_engine_rapid',
'ocr_engine_aliyun_new', 'ocr_engine_deepseek'

# å¤–éƒ¨ä¾èµ–ï¼ˆåœ¨requirements.txtä¸­ï¼‰
PIL -> pillow
PySide6 -> pyside6
openpyxl -> openpyxl
fitz -> pymupdf
alibabacloud_ocr_api20210707 -> alibabacloud-ocr-api20210707
alibabacloud_tea_openapi -> alibabacloud-tea-openapi
alibabacloud_tea_util -> alibabacloud-tea-util
openai -> openai

# å¯é€‰ä¾èµ–ï¼ˆæŒ‰éœ€å¯¼å…¥ï¼‰
numpy -> numpy (å·²æ³¨é‡Šï¼ŒæŒ‰éœ€å¯¼å…¥)
```
